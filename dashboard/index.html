<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chin2.0 ‚Äî Roblox Game Factory</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0a0a0f; color: #e0e0e0; min-height: 100vh; }
  
  .header { background: linear-gradient(135deg, #1a1a2e, #16213e); padding: 20px 30px; border-bottom: 1px solid #2a2a4a; display: flex; justify-content: space-between; align-items: center; }
  .header h1 { font-size: 24px; color: #fff; }
  .header h1 span { color: #00d4ff; }
  .header .status { font-size: 13px; color: #888; }
  .header .status .live { color: #00ff88; font-weight: bold; }
  
  .grid { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: auto 1fr; gap: 16px; padding: 20px; max-height: calc(100vh - 80px); }
  
  .panel { background: #12121f; border: 1px solid #1e1e3a; border-radius: 12px; overflow: hidden; display: flex; flex-direction: column; }
  .panel-header { padding: 14px 18px; background: #161630; border-bottom: 1px solid #1e1e3a; font-size: 14px; font-weight: 600; display: flex; justify-content: space-between; align-items: center; }
  .panel-header .count { background: #2a2a5a; color: #00d4ff; padding: 2px 10px; border-radius: 12px; font-size: 12px; }
  .panel-body { padding: 14px 18px; overflow-y: auto; flex: 1; max-height: 400px; }
  
  /* Agents Panel */
  .agent-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
  .agent-card { background: #1a1a30; border: 1px solid #2a2a4a; border-radius: 10px; padding: 14px; text-align: center; transition: all 0.3s; }
  .agent-card:hover { border-color: #00d4ff; transform: translateY(-2px); }
  .agent-card .emoji { font-size: 28px; margin-bottom: 6px; }
  .agent-card .name { font-size: 13px; font-weight: 600; color: #fff; margin-bottom: 4px; }
  .agent-card .role { font-size: 11px; color: #888; margin-bottom: 8px; }
  .agent-status { font-size: 11px; padding: 3px 10px; border-radius: 10px; display: inline-block; }
  .status-active { background: #0a2a1a; color: #00ff88; border: 1px solid #00ff8833; }
  .status-working { background: #2a1a0a; color: #ffaa00; border: 1px solid #ffaa0033; animation: pulse 2s infinite; }
  .status-ready { background: #1a1a2e; color: #888; border: 1px solid #333; }
  .status-idle { background: #1a1a2e; color: #555; border: 1px solid #222; }
  
  @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
  
  /* Activity Feed */
  .feed-item { padding: 12px 0; border-bottom: 1px solid #1a1a30; display: flex; gap: 12px; }
  .feed-item:last-child { border-bottom: none; }
  .feed-avatar { width: 32px; height: 32px; border-radius: 8px; background: #1a1a3a; display: flex; align-items: center; justify-content: center; font-size: 16px; flex-shrink: 0; }
  .feed-content { flex: 1; }
  .feed-meta { font-size: 11px; color: #666; margin-bottom: 4px; }
  .feed-meta .agent-name { color: #00d4ff; font-weight: 600; }
  .feed-text { font-size: 13px; line-height: 1.5; color: #ccc; }
  .feed-text code { background: #1a1a3a; padding: 1px 6px; border-radius: 4px; font-size: 12px; color: #ff79c6; }
  
  /* Tasks Panel */
  .task-filters { display: flex; gap: 8px; margin-bottom: 14px; }
  .task-filter { font-size: 12px; padding: 4px 12px; border-radius: 8px; background: #1a1a30; border: 1px solid #2a2a4a; color: #888; cursor: pointer; }
  .task-filter.active { background: #00d4ff22; color: #00d4ff; border-color: #00d4ff44; }
  
  .task-item { padding: 10px 14px; background: #1a1a30; border-radius: 8px; margin-bottom: 8px; border-left: 3px solid #333; display: flex; align-items: flex-start; gap: 10px; }
  .task-item.completed { border-left-color: #00ff88; opacity: 0.7; }
  .task-item.in-progress { border-left-color: #ffaa00; }
  .task-item.pending { border-left-color: #555; }
  .task-item.blocked { border-left-color: #ff4444; }
  .task-check { width: 18px; height: 18px; border-radius: 4px; border: 2px solid #444; flex-shrink: 0; margin-top: 1px; display: flex; align-items: center; justify-content: center; font-size: 11px; }
  .task-item.completed .task-check { background: #00ff8833; border-color: #00ff88; color: #00ff88; }
  .task-info { flex: 1; }
  .task-title { font-size: 13px; font-weight: 500; color: #ddd; }
  .task-item.completed .task-title { text-decoration: line-through; color: #888; }
  .task-detail { font-size: 11px; color: #666; margin-top: 3px; }
  .task-badge { font-size: 10px; padding: 2px 8px; border-radius: 6px; }
  .badge-design { background: #ff79c622; color: #ff79c6; }
  .badge-code { background: #00d4ff22; color: #00d4ff; }
  .badge-economy { background: #ffaa0022; color: #ffaa00; }
  .badge-qa { background: #ff444422; color: #ff4444; }
  .badge-asset { background: #aa88ff22; color: #aa88ff; }
  
  /* Work Output Panel */
  .work-item { padding: 14px; background: #1a1a30; border-radius: 8px; margin-bottom: 10px; }
  .work-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
  .work-title { font-size: 13px; font-weight: 600; color: #fff; }
  .work-type { font-size: 10px; padding: 2px 8px; border-radius: 6px; background: #2a2a5a; color: #00d4ff; }
  .work-preview { font-size: 12px; color: #999; line-height: 1.5; background: #0a0a15; padding: 10px 14px; border-radius: 6px; font-family: 'Fira Code', monospace; white-space: pre-wrap; max-height: 120px; overflow-y: auto; }
  .work-meta { font-size: 11px; color: #555; margin-top: 8px; }

  .full-width { grid-column: 1 / -1; }
  
  .empty-state { text-align: center; padding: 40px; color: #444; font-size: 13px; }
  
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: #2a2a4a; border-radius: 3px; }
</style>
</head>
<body>

<div class="header">
  <h1>üéÆ <span>Chin2.0</span> ‚Äî Roblox Game Factory</h1>
  <div class="status">
    <span class="live">‚óè LIVE</span> &nbsp; Current Project: <strong>Endless Escape</strong> &nbsp; | &nbsp; <span id="timestamp"></span>
  </div>
</div>

<div class="grid">
  <!-- Agents Panel -->
  <div class="panel">
    <div class="panel-header">ü§ñ Agents <span class="count" id="agent-count">6</span></div>
    <div class="panel-body">
      <div class="agent-grid" id="agents-grid"></div>
    </div>
  </div>

  <!-- Tasks Panel -->
  <div class="panel">
    <div class="panel-header">üìã Tasks <span class="count" id="task-count">0</span></div>
    <div class="panel-body">
      <div class="task-filters">
        <div class="task-filter active" data-filter="all" onclick="filterTasks('all', this)">All</div>
        <div class="task-filter" data-filter="in-progress" onclick="filterTasks('in-progress', this)">In Progress</div>
        <div class="task-filter" data-filter="pending" onclick="filterTasks('pending', this)">Pending</div>
        <div class="task-filter" data-filter="completed" onclick="filterTasks('completed', this)">Done</div>
      </div>
      <div id="tasks-list"></div>
    </div>
  </div>

  <!-- Activity Feed -->
  <div class="panel">
    <div class="panel-header">üí¨ Agent Activity <span class="count" id="feed-count">0</span></div>
    <div class="panel-body" id="feed-list"></div>
  </div>

  <!-- Work Output -->
  <div class="panel">
    <div class="panel-header">üì¶ Work Output <span class="count" id="work-count">0</span></div>
    <div class="panel-body" id="work-list"></div>
  </div>
</div>

<script>
// ===== DATA STORE =====
let state = {
  agents: [
    { id: 'orchestrator', emoji: 'üéÆ', name: 'Chin2.0', role: 'Orchestrator', status: 'active' },
    { id: 'designer', emoji: 'üé®', name: 'Game Designer', role: 'Scope & Loops', status: 'working' },
    { id: 'coder', emoji: 'üíª', name: 'Luau Coder', role: 'Code Generation', status: 'ready' },
    { id: 'economy', emoji: 'üí∞', name: 'Economy', role: 'Monetization', status: 'ready' },
    { id: 'qa', emoji: 'üîç', name: 'QA Hunter', role: 'Exploit Detection', status: 'idle' },
    { id: 'asset', emoji: 'üñºÔ∏è', name: 'Asset Agent', role: 'Visuals & Prompts', status: 'idle' },
  ],
  tasks: [
    { id: 1, title: 'Define agent roles & system prompts', agent: 'design', badge: 'design', status: 'completed', detail: 'Chin2.0 ‚Ä¢ All 6 agents defined' },
    { id: 2, title: 'Scope Endless Escape ‚Äî full game design', agent: 'design', badge: 'design', status: 'in-progress', detail: 'Game Designer working...' },
    { id: 3, title: 'Validate monetization model', agent: 'economy', badge: 'economy', status: 'pending', detail: 'Economy Agent ‚Ä¢ Waiting for scope' },
    { id: 4, title: 'Build core server scripts', agent: 'code', badge: 'code', status: 'pending', detail: 'Luau Coder ‚Ä¢ Waiting for validated scope' },
    { id: 5, title: 'Build client UI & effects', agent: 'code', badge: 'code', status: 'pending', detail: 'Luau Coder' },
    { id: 6, title: 'Design economy & pricing table', agent: 'economy', badge: 'economy', status: 'pending', detail: 'Economy Agent' },
    { id: 7, title: 'Generate game icon & thumbnail', agent: 'asset', badge: 'asset', status: 'pending', detail: 'Asset Agent' },
    { id: 8, title: 'Security audit all RemoteEvents', agent: 'qa', badge: 'qa', status: 'pending', detail: 'QA Agent ‚Ä¢ After code complete' },
    { id: 9, title: 'Install Roblox Studio', agent: 'design', badge: 'design', status: 'pending', detail: 'Chinmaya ‚Ä¢ Blocker for deployment' },
  ],
  feed: [
    { agent: 'üéÆ', name: 'Chin2.0', time: '13:01', text: 'System online. All agent roles defined. Starting Endless Escape pipeline.' },
    { agent: 'üéÆ', name: 'Chin2.0', time: '13:05', text: 'Spawned <code>Game Designer</code> agent to scope Endless Escape. Money-first design.' },
    { agent: 'üé®', name: 'Game Designer', time: '13:06', text: 'Starting scope work on Endless Escape. Analyzing top obby monetization patterns...' },
    { agent: 'üéÆ', name: 'Chin2.0', time: '13:09', text: 'Dashboard deployed. Waiting for Game Designer to deliver scope document.' },
  ],
  work: [
    { title: 'Agent System Architecture', type: 'Document', preview: '6 agents defined:\n1. Game Designer ‚Äî scope, loops, monetization\n2. Luau Coder ‚Äî production Luau scripts\n3. Economy ‚Äî ARPU/LTV tuning\n4. QA ‚Äî exploit hunting\n5. Asset ‚Äî visuals & prompts\n6. Chin2.0 ‚Äî orchestrator', meta: 'Chin2.0 ‚Ä¢ 13:01' },
  ]
};

// ===== RENDER FUNCTIONS =====
function renderAgents() {
  const grid = document.getElementById('agents-grid');
  grid.innerHTML = state.agents.map(a => `
    <div class="agent-card">
      <div class="emoji">${a.emoji}</div>
      <div class="name">${a.name}</div>
      <div class="role">${a.role}</div>
      <span class="agent-status status-${a.status}">${a.status}</span>
    </div>
  `).join('');
}

function renderTasks(filter = 'all') {
  const list = document.getElementById('tasks-list');
  const filtered = filter === 'all' ? state.tasks : state.tasks.filter(t => t.status === filter);
  document.getElementById('task-count').textContent = state.tasks.length;
  
  if (filtered.length === 0) {
    list.innerHTML = '<div class="empty-state">No tasks match filter</div>';
    return;
  }
  
  list.innerHTML = filtered.map(t => `
    <div class="task-item ${t.status}">
      <div class="task-check">${t.status === 'completed' ? '‚úì' : ''}</div>
      <div class="task-info">
        <div class="task-title">${t.title}</div>
        <div class="task-detail">${t.detail} &nbsp; <span class="task-badge badge-${t.badge}">${t.badge}</span></div>
      </div>
    </div>
  `).join('');
}

function renderFeed() {
  const list = document.getElementById('feed-list');
  document.getElementById('feed-count').textContent = state.feed.length;
  list.innerHTML = state.feed.slice().reverse().map(f => `
    <div class="feed-item">
      <div class="feed-avatar">${f.agent}</div>
      <div class="feed-content">
        <div class="feed-meta"><span class="agent-name">${f.name}</span> ‚Ä¢ ${f.time}</div>
        <div class="feed-text">${f.text}</div>
      </div>
    </div>
  `).join('');
}

function renderWork() {
  const list = document.getElementById('work-list');
  document.getElementById('work-count').textContent = state.work.length;
  list.innerHTML = state.work.slice().reverse().map(w => `
    <div class="work-item">
      <div class="work-header">
        <span class="work-title">${w.title}</span>
        <span class="work-type">${w.type}</span>
      </div>
      <div class="work-preview">${w.preview}</div>
      <div class="work-meta">${w.meta}</div>
    </div>
  `).join('');
}

function filterTasks(filter, el) {
  document.querySelectorAll('.task-filter').forEach(f => f.classList.remove('active'));
  el.classList.add('active');
  renderTasks(filter);
}

function updateTimestamp() {
  document.getElementById('timestamp').textContent = new Date().toLocaleString('en-US', { 
    hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true 
  });
}

// ===== PUBLIC API (called by Chin2.0 via canvas eval) =====
window.dashAPI = {
  updateAgent(id, updates) {
    const agent = state.agents.find(a => a.id === id);
    if (agent) Object.assign(agent, updates);
    renderAgents();
  },
  addTask(task) {
    task.id = state.tasks.length + 1;
    state.tasks.push(task);
    renderTasks();
  },
  updateTask(id, updates) {
    const task = state.tasks.find(t => t.id === id);
    if (task) Object.assign(task, updates);
    renderTasks();
  },
  addFeed(entry) {
    state.feed.push(entry);
    renderFeed();
  },
  addWork(item) {
    state.work.push(item);
    renderWork();
  },
  getState() { return state; }
};

// ===== INIT =====
renderAgents();
renderTasks();
renderFeed();
renderWork();
updateTimestamp();
setInterval(updateTimestamp, 1000);
</script>
</body>
</html>
